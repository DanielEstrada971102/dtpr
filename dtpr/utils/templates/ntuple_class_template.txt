# Generic NTuple template generated by dtpr-package on {date}
# 
# Author:
#     [Your Name]
# Version:
#     0.1
#
# This class is a template for a generic NTuple class. It is used to create an NTuple object with 
# various attributes. It inherits from the NTuple class (dtpr.base.ntuple) and contains a 'run' method 
# for processing Event instances. The __init__ method calls super().__init__ to initialize the base class.

from dtpr.base.event import Event
from dtpr.base.ntuple import NTuple

class {name}(NTuple):
    def __init__(self, inputFolder, selectors, maxfiles=-1):
        """
        Initialize a {name} instance.

        :param inputFolder: The folder containing the input files.
        :type inputFolder: str
        :param selectors: A list of selector functions to apply to the events. See dtpr.utils.filters
        :type selectors: list
        :param maxfiles: The maximum number of files to process. Defaults to -1 (process all files).
        :type maxfiles: int, optional
        """
        super().__init__(inputFolder, selectors, maxfiles) # add tree_name argument if needed, default is "/TTREE"

    def run(self, ev: Event):
        """
        Run the event analysis specific to {name}.

        :param ev: The event to analyze.
        :type ev: Event
        :returns: The analyzed event if it passes the selection criteria, otherwise None.
        :rtype: Event
        """
        # Implement specific analysis here before apply global selection
        # ...

        # Apply global selection
        if not self.passes_event(ev):
            pass
        else:
            return ev


if __name__ == '__main__':
    import os
    # Test the class here
    def example_selector(event):
        # Example selector function that always returns True
        return True

    input_folder = "Input/folder/path" # Add the path to the input folder
    selectors = [example_selector]
    max_files = 5

    ntuple_instance = {name}(input_folder, selectors, maxfiles=max_files)
    ev_iter = iter(ntuple_instance.events)
    print(next(ev_iter))

